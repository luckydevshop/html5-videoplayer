/*!
 * html5-videoplayer 
 * version: 0.1.0 
 * build date: 2014-02-26 
 */
"use strict";var video=document.getElementById("video-player"),videoControls=document.getElementById("controls"),play=document.getElementById("action"),playTime=document.getElementById("play-time"),totalTime=document.getElementById("total-time"),progressContainer=document.getElementById("progress"),playProgressBar=document.getElementById("bar"),volume=document.getElementById("volume"),volumeTick=document.querySelectorAll(".volume-mark"),VideoPlayer;VideoPlayer={init:function(){video.removeAttribute("controls"),video.readyState>0?VideoPlayer.initializeControls():video.addEventListener("loadedmetadata",VideoPlayer.initializeControls,!1),VideoPlayer.handleButtonPresses()},initializeControls:function(){totalTime.innerHTML=VideoPlayer.convertTime(video.duration),VideoPlayer.showHideControls()},showHideControls:function(){video.addEventListener&&videoControls.addEventListener?(video.addEventListener("mouseover",VideoPlayer.showControls,!1),video.addEventListener("mouseout",VideoPlayer.hideControls,!1),videoControls.addEventListener("mouseover",VideoPlayer.showControls,!1),videoControls.addEventListener("mouseout",VideoPlayer.hideControls,!1)):(video.attachEvent("onmouseover",VideoPlayer.showControls,!1),video.attachEvent("onmouseout",VideoPlayer.hideControls,!1),videoControls.attachEvent("onmouseover",VideoPlayer.showControls,!1),videoControls.attachEvent("onmouseout",VideoPlayer.hideControls,!1))},showControls:function(){videoControls.style.opacity=1,videoControls.style.zIndex=2},hideControls:function(){videoControls.style.opacity=0,videoControls.style.zIndex=-1},handleButtonPresses:function(){video.addEventListener("click",VideoPlayer.playORpause,!1),play.addEventListener("click",VideoPlayer.playORpause,!1),volumeTick.addEventListener("click",VideoPlayer.adjustVolume,!1),video.addEventListener("play",function(){play.title="Pause",play.childNodes[0].classList.remove("icon-play"),play.childNodes[0].className+=" icon-pause",VideoPlayer.trackPlayProgress()},!1),video.addEventListener("pause",function(){play.title="Play",play.childNodes[0].classList.remove("icon-pause"),play.childNodes[0].className+=" icon-play",VideoPlayer.stopTrackingPlayProgress()},!1),video.addEventListener("ended",function(){this.currentTime=0,this.pause()},!1)},playORpause:function(){video.paused||video.ended?(video.ended&&(video.currentTime=0),video.play()):video.pause()},adjustVolume:function(a){var b=a.target.getAttribute("id");"master-volume"===b?video.volume=video.volume>0?0:1:(b=parseInt(b,10),isNaN(b)?console.log("NaN, not changing level"):video.volume=1===b?1:.1*b)},trackPlayProgress:function(){!function a(){VideoPlayer.updatePlayProgress(),VideoPlayer.playProgressInterval=setTimeout(a,50)}()},updatePlayProgress:function(){playTime.innerHTML=VideoPlayer.convertTime(video.currentTime),playProgressBar.style.width=parseInt(video.currentTime/video.duration*100,10)+"%"},stopTrackingPlayProgress:function(){clearTimeout(VideoPlayer.playProgressInterval)},convertTime:function(a){var b,c=parseInt(a/60,10),d=parseInt(a%60,10);return 10>d&&(d="0"+d),b=c+":"+d}},function(){VideoPlayer.init()}();